<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">

		<title>Genuary23 | 20 - Art Deco</title>

		<script src="../p5.js"></script>
	</head>
	<style>
		body {
			padding: 0;
			margin: 0;
			position: fixed;
			top: 0; left: 0; right: 0; bottom: 0;
			border: none;
			overflow: hidden;
		}
	</style>
	<body></body>
	<script>
		const MODE_DEBUG = false;
		const BG_COLOR = 7, FG_COLOR = 255 - BG_COLOR;
		
		function setup() {
			createCanvas( window.innerWidth, window.innerHeight );
			noLoop( );
			setStyle( );
			rectMode( CENTER );
		}

		function setStyle( ) {
			angleMode( RADIANS );
			strokeWeight( 3 );
			stroke( FG_COLOR );
			noFill( );
		}

		function draw( ) {
			background( BG_COLOR );
			translate( width * .5, height * .5 );
			drawRects( );
			displayDiamonds( );
		}

		function drawRects( ) {
			const n = 2;
			for ( let i = 0; i < n; i++ )
				drawRandomRect( i );
		}

		function drawRandomRect( factor ) {
			const w = random( .2, .8 ) * width;
			const h = random( .2, .8 ) * height;
			displayRect( w, h );
			if ( p( 3 ) ) displaySymetricCircles( w, h );
			if ( p( 3 ) ) displayCorners( w, h );
			if ( p( 3 ) ) displayCross( w, h );
		}

		function displayRect( w, h ) {
			rect( 0, 0, w, h );
		}

		function displaySymetricCircles( w, h ) {
			const dx = w * .5;
			arc( -dx, 0, h, h, -HALF_PI,  HALF_PI );
			arc( +dx, 0, h, h,  HALF_PI, -HALF_PI );
		}

		function displayCorners( w, h ) {
			const s = random( .01, .05 ) * width;
			const dx = ( w + s ) * .5;
			const dy = ( h + s ) * .5;
			rect( -dx, +dy, s, s );
			rect( +dx, +dy, s, s );
			rect( -dx, -dy, s, s );
			rect( +dx, -dy, s, s );
		}

		function displayCross( w, h ) {
			const s = random( .01, .05 ) * width;
			translate( 0, -h * .5 );
			displayCross_( w, h, s );
			translate( 0, h );
			displayCross_( w, h, s, w );
			translate( 0, -h * .5 );
		}

		function displayDiamond( posX, posY, size ) {
			translate( posX, posY );
			beginShape( );
			vertex( size, 0 );
			vertex( 0, -size );
			vertex( -size, 0 );
			vertex( 0, size );
			endShape( CLOSE );
			translate( -posX, -posY );
		}

		function displayDiamonds( ) {
			let y = 0;
			let r1 = random( 1.1, 1.3 ), r2 = random( .3, .6 ) * s( );
			for ( let s = random( 50, 150 ); s > 10; s *= r2 ) {
				displayDiamond( 0,  y, s );
				displayDiamond( 0, -y, s );
				y += s * r1;
			}
		}

		function displayCross_( w, h, s1 ) {
			const s2 = w/2 + s1;
			line( -s1, -s1, s1,  s1 );
			line( -s1,  s1, s1, -s1 );
			line( +s1, -s1,  ( s2 + s1 ), -s1 );
			line( +s1, +s1,  ( s2 + s1 ), +s1 );
			line( -s1, -s1, -( s2 + s1 ), -s1 );
			line( -s1, +s1, -( s2 + s1 ), +s1 );
		}

		function p( difficulty ) {
			return random( 0, difficulty ) > ( difficulty - 1 );
		}

		function s( ) {
			return [ -1, 1 ][ floor( random( 0, 2 ) ) ];
		}
	</script>
</html>
